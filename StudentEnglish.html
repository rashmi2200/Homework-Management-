<!-- <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-size: cover;
        background-position: center;
      }

      .container {
        display: flex;
      }

      .sidebar {
        height: 100%;
        width: 250px;
        position: fixed;
        top: 0;
        left: 0;
        padding-top: 20px;
        background-color: #837edd;
        align-items: center;
      }

      .sidebar ul {
        list-style-type: none;
        padding: 0;
        margin: 15px;
      }
      .sidebar ul li {
        display: flex;
        align-items: center;
        padding: 20px 20px;
      }

      .sidebar ul li button {
        border-radius: 100px;
        height: 35px;
        width: 120px;
        font-size: 1.1rem;
        font-family: "Franklin Gothic Medium", "Arial Narrow", Arial, sans-serif;
        background-color: #f7f7f7;
      }

      .sidebar ul li button:hover {
        color: rgb(232, 96, 189);
        transition: 0.1s;
      }

      .Dashboard {
        border-radius: 50%;
        height: 100px;
        width: 100px;
        margin-left: 50px;
      }

      .Logout {
        margin-top: 70px;
      }

      .top-right {
        position: absolute;
        top: 20px;
        right: 20px;
        display: flex;
        align-items: center;
        justify-content: flex-end;
      }

      .top-right img {
        margin-left: 10px;
      }

      .top-right button:hover {
        color: #f3eeee;
      }

      /* Assignment portal */
      .assign {
        max-width: 800px;
        margin: 80px auto;
        padding: 20px;
        margin-right: 15rem;
        background-color: #9795ea;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      h1 {
        text-align: center;
      }

      /* Form styles */
      form {
        margin-top: 20px;
      }

      input[type="text"],
      textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 15px;
        border: 1px solid #f9f3f3;
        border-radius: 4px;
        box-sizing: border-box;
      }

      input[type="file"] {
        margin-top: 5px;
      }

      input[type="submit"] {
        background-color: #4caf50;
        color: rgb(254, 253, 253);
        padding: 12px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      input[type="submit"]:hover {
        background-color: #45a049;
      }
    </style>
  </head>
  <body>
    <div class="top-right">
      <a href=" " target="_blank">
        <img src="notification.png" alt="Notification" width="30" height="30" />
      </a>
      <a href="https://mail.google.com/mail/u/1/#inbox" target="_blank">
        <img src="profile.png" alt="Profile" width="40" height="40" />
      </a>
    </div>
    <div class="container">
      <div class="sidebar">
        <img src="Herald.png" alt="pic" class="Dashboard" />
        <ul>
          <li>
            <a href="index.html" class="card">
              <button type="Home">Home</button>
            </a>
          </li>
          <li>
            <a href="index.html" class="card">
              <button>Noticeboard</button>
            </a>
          </li>
          <li>
            <a href="index.html" class="card">
              <button>To-Do</button>
            </a>
          </li>
          <li>
            <a href="index.html" class="card">
              <button>Settings</button>
            </a>
          </li>
          <li>
            <button class="Logout">Logout</button>
          </li>
        </ul>
      </div>
    </div>
    <div class="assign">
      <h1>Assignment Portal</h1>

      <form
        enctype="multipart/form-data"
        action="/submit_assignment"
        method="post"
      >
        <label for="assignmentTitle">Assignment Title:</label>
        <input type="text" id="assignmentTitle" name="assignmentTitle" />

        <label for="instructions">Instructions:</label>
        <textarea id="instructions" name="instructions" rows="4"></textarea>

        <label for="dueDate">Due Date:</label>
        <input
          type="text"
          id="dueDate"
          name="dueDate"
          placeholder="YYYY-MM-DD"
        />

        <label for="file">Upload File:</label>
        <input type="file" id="file" name="file" />

        <input type="submit" value="Create Assignment" />
      </form>
    </div>
  </body>
</html> -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Assignment Portal</title>
    <style>
      /* Reset CSS */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: Arial, sans-serif;
        background-color: #f9f9f9;
      }

      /* Top right icons */
      .top-right {
        position: absolute;
        top: 20px;
        right: 20px;
      }

      .top-right img {
        margin-left: 10px;
        border-radius: 50%;
        transition: transform 0.3s ease-in-out;
      }

      .top-right img:hover {
        transform: scale(1.1);
      }

      /* Sidebar */
      .Sidebar {
        height: 100%;
        width: 250px;
        position: fixed;
        top: 0;
        left: 0;
        padding-top: 20px;
        background-color: #aaa7e3;
        align-items: center;
      }

      .Dashboard {
        border-radius: 50%;
        height: 100px;
        width: 100px;
        margin-left: 75px;
        margin-bottom: 20px;
      }

      .sidebar ul {
        list-style-type: none;
        padding: 0;
        margin: 15px;
      }

      .sidebar ul li {
        display: flex;
        align-items: center;
        padding: 20px 20px;
      }

      .sidebar ul li button {
        border-radius: 100px;
        height: 35px;
        width: 120px;
        font-size: 1.1rem;
        font-family: "Franklin Gothic Medium", "Arial Narrow", Arial, sans-serif;
        background-color: #f7f7f7;
      }

      .sidebar ul li button:hover {
        background-color: #e9c3dc;
        transform: scale(1.05);
      }

      .Logout {
        margin-top: 70px;
      }

      /* Assignment Portal */
      .assign {
  max-width: 1000px;
  margin: 100px auto;
  padding: 80px;
  background-color: #aaa7e3;
  border-radius: 8px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  /* Add margin to the left side to move it to the right */
  margin-left: 350px; /* Adjust this value as needed */
}
body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    margin: 0;
    padding: 0;
}



h1 {
    text-align: center;
    color: #171717;
    margin-bottom: 20px;
}

.assignment {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1), 0 4px 8px rgba(0, 0, 0, 0.1); /* More realistic box shadow */
    padding: 25px;
    margin-bottom: 20px;
    transition: transform 0.3s ease-in-out;
}

.assignment:last-child {
    border-bottom: none;
}

.assignment:hover {
    transform: translateY(-4px); /* Add a slight lift effect on hover */
}

.assignment p {
    margin: 0;
    padding: 5px 0;
}



/* General styling */
label {
    display: block;
    color: #070707;
    margin-bottom: 10px; /* Increased margin for better separation */
}

input[type="text"],
textarea,
input[type="file"],
input[type="submit"] {
    padding: 12px; /* Slightly increased padding for better visual balance */
    margin-bottom: 20px; /* Increased margin for better separation */
    border: none;
    border-radius: 4px;
    transition: background-color 0.3s ease-in-out;
}

/* Text input and textarea styling */
input[type="text"],
textarea {
    background-color: #f4f4f4;
}

/* File input styling */
input[type="file"] {
    background-color: #1f1c20;
    color: white;
    cursor: pointer;
}



/* Resubmit option styling */
.resubmit {
    display: flex; /* Use flexbox */
    align-items: center; /* Align items vertically */
    margin-bottom: 20px; /* Increased margin for better separation */
}

.resubmit input[type="checkbox"] {
    margin-right: 8px; /* Adjust spacing between checkbox and text */
}

.resubmit label {
    margin: 0; /* Remove default margin */
}
#submitAssignmentBtn {
    padding: 12px 24px; /* Adjust padding for better button size */
    background-color: #1f1c20;
    color: #f4f4f4;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s ease-in-out;
}

#submitAssignmentBtn:hover {
    background-color: #5955B3;
}
.custom-file-upload {
  cursor: pointer;
  background-color: #5955B3;
  color: #fff;
  padding: 8px 16px;
  border-radius: 4px;
  transition: background-color 0.3s ease;
}

.custom-file-upload:hover {
  background-color: #0056b3;
}

.file-input {
  display: none;
}

#fileInputName {
  margin-top: 5px;
  font-size: 14px;
}



    </style>
  </head>
  <body>
    <div class="top-right">
      <a href="#" target="_blank">
        <img src="image/notif.png" alt="Notification" width="30" height="30" />
      </a>
      <a href="https://mail.google.com/mail/u/1/#inbox" target="_blank">
        <img src="image/profile.png" alt="Profile" width="40" height="40" />
      </a>
    </div>
    <div class="sidebar">
      <img src="image/Herald.png" alt="pic" class="Dashboard" />
      <ul>
        <li>
          <button
            class="Home"
            onclick="window.location.href='StudentDashboard.html'">
            Home
          </button>
        </li>
        <li>
          <a href="studentNotice.html">
          <button>Noticeboard</button>
        </li>
      </a>
        <li>
          <a href="to-do.html">
          <button type="todo">To-Do</button>
        </li>
      </a>
        <li>
          <a href="StudentSetting.html">
          <button>Settings</button>
        </li>
      </a>
      <li>
        <a href="StudentGrade.html">
        <button>Grade</button>
      </li>
    </a>
        <li>
          <button
            class="Logout"
            onclick="window.location.href='loginpage.html'">
            Logout
          </button>
        </li>
      </ul>
    </div>
    </div>

    <div class="assign">
      <h1>Assignment Portal</h1>
      <div id="assignmentDetails" clas
      s="assignment-details">
          <!-- Assignment details will be dynamically added here -->
      </div>
      <input type="text" id="assignmentFileLink" class="assignment-input" style="width: 600px;" placeholder="Attach a file or enter URL...">
      <div class="file-upload">
          <label for="fileInput" class="custom-file-upload">Upload File</label>
          <input type="file" id="fileInput" class="file-input" accept=".pdf, .doc, .docx">
      </div>
      <button type="button" id="submitAssignmentBtn" class="submit-assignment-button">Submit Assignment</button>
  </div>
  
  <script>
    // Function to display the selected file name
    function displayFileName() {
        const fileInput = document.getElementById('fileInput');
        const assignmentFileLink = document.getElementById('assignmentFileLink');
        assignmentFileLink.value = fileInput.files.length > 0 ? fileInput.files[0].name : '';
    }
    
    document.addEventListener('DOMContentLoaded', () => {
        populateAssignmentDetails();

        const fileInput = document.getElementById('fileInput');
        if (fileInput) {
            fileInput.addEventListener('change', displayFileName);
        }

        const customFileUpload = document.querySelector('.custom-file-upload');
        if (customFileUpload) {
            customFileUpload.addEventListener('click', () => {
                document.getElementById('fileInput').click();
            });
        }

        const submitAssignmentBtn = document.getElementById('submitAssignmentBtn');
        if (submitAssignmentBtn) {
            submitAssignmentBtn.addEventListener('click', submitAssignment);
        }
    });

    function populateAssignmentDetails() {
        const assignmentDetailsDiv = document.getElementById('assignmentDetails');
        const urlParams = new URLSearchParams(window.location.search);
        console.log("URL Parameters:", urlParams); // Log URL parameters

        const assignmentTitle = urlParams.get('title');
        console.log("Assignment Title:", assignmentTitle); // Log assignment title

        const assignmentDetail = urlParams.get('detail');
        console.log("Assignment Detail:", assignmentDetail); // Log assignment detail

        const assignmentLink = urlParams.get('link');
        console.log("Assignment Link:", assignmentLink); // Log assignment link

        const assignmentDueDate = urlParams.get('dueDate');
        console.log("Assignment Due Date:", assignmentDueDate); // Log assignment due date

        const assignmentDueTime = urlParams.get('dueTime');
        console.log("Assignment Due Time:", assignmentDueTime); // Log assignment due time

        const assignmentSubject = urlParams.get('subject');
        console.log("Assignment Subject:", assignmentSubject); // Log assignment subject

        if (!assignmentTitle || !assignmentDetail || !assignmentSubject || !assignmentDueDate || !assignmentDueTime) {
            console.error('Incomplete assignment data found in URL parameters');
            return;
        }

        const formattedDueDate = assignmentDueDate.split('/').reverse().join('-');
        const formattedDueTime = assignmentDueTime.includes('AM') ? assignmentDueTime.replace(' AM', '') : (parseInt(assignmentDueTime.split(':')[0]) + 12) + ':' + assignmentDueTime.split(':')[1].replace(' PM', '');
        const deadline = new Date(`${formattedDueDate}T${formattedDueTime}`);

        let assignmentDetailsHTML = `
            <div class="assignment">
                <p><strong>Subject:</strong> ${assignmentSubject}</p>
                <p><strong>Title:</strong> ${assignmentTitle}</p>
                <p><strong>Details:</strong> ${assignmentDetail}</p>
                <p><strong>Due Date:</strong> ${assignmentDueDate}</p>
                <p><strong>Due Time:</strong> ${assignmentDueTime}</p>
        `;

        if (assignmentLink) {
            assignmentDetailsHTML += `
                <p><strong>Link:</strong> <a href="${assignmentLink}" target="_blank">${assignmentLink}</a></p>
            `;
        } else {
            assignmentDetailsHTML += `
                <p><strong>Files:</strong> No files attached</p>
            `;
        }

        assignmentDetailsHTML += `</div>`;

        assignmentDetailsDiv.innerHTML = assignmentDetailsHTML;
    }

    async function submitAssignment(event) {
            event.preventDefault();

        const urlParams = new URLSearchParams(window.location.search);

        
        const assignmentTitle = urlParams.get('title');
        // console.log("Assignment Title:", assignmentTitle); // Log assignment title

        const assignmentDetail = urlParams.get('detail');
        // console.log("Assignment Detail:", assignmentDetail); // Log assignment detail

        const assignmentLink = urlParams.get('link');
        // console.log("Assignment Link:", assignmentLink); // Log assignment link

        const assignmentDueDate = urlParams.get('dueDate');
        // console.log("Assignment Due Date:", assignmentDueDate); // Log assignment due date

        const assignmentDueTime = urlParams.get('dueTime');
        // console.log("Assignment Due Time:", assignmentDueTime); // Log assignment due time

        const assignmentSubject = urlParams.get('subject');
        // console.log("Assignment Subject:", assignmentSubject); // Log assignment subject

        const fileInput = document.getElementById('fileInput');
        const formData = new FormData();
        // formData.append('file', fileInput.files[0]);
        // console.log("FILE NAME",fileInput.files[0]?.name);

      const payload = {
        title: assignmentTitle, 
        detail: assignmentDetail, 
        link: assignmentLink, 
        dueDate: assignmentDueDate, 
        dueTime: assignmentDueTime, 
        subject: assignmentSubject,
        file: fileInput.files[0]?.name,
      }

            try {
              console.log("payload", payload)
                const response = await fetch('http://localhost:3000/submit_assignment', {
                    method: 'POST',
                    body: JSON.stringify(payload),
                    headers: {"Content-Type":"application/json"}
                });

                if (response.ok) {
                    console.log('Assignment submitted successfully');
                    alert('Assignment Submitted Successfully');
                } else {
                    console.error('Failed to submit assignment');
                    alert('Failed to submit assignment');
                }
            } catch (error) {
                console.error('Error submitting assignment:', error);
                alert('Error submitting assignment');
            }
        }

        const assignmentForm = document.getElementById('assignmentForm');
        assignmentForm.addEventListener('submit', submitAssignment);
</script>


    




</body>
</html>