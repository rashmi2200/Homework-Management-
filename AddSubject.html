<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel</title>
  <link rel="stylesheet" href="AdminDashboard.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
  <header>
    <div class="background"></div>
     <h1>Subject</h1>
     <div class="content-layer">
      <!-- Notification icon -->
      <a href="#"><i class="fa-regular fa-bell fa-lg"></i></a>  
     <!-- User picture -->
     <img src="image/user.jpg" alt="User Picture" class="user-picture">
     </div>
  </header>
  <section class="main-section">
    <nav class="main-menu">
        <div class="nav">
            <a href="AdminDashboard.html" class="button"><i class="fa-solid fa-house"></i> Home</a>
            <a href="AdminStudent.html" class="button"><i class="fa-solid fa-graduation-cap"></i> Student</a>
            <a href="AdminTeacher.html" class="button"><i class="fa-solid fa-person-chalkboard"></i> Teacher</a>
            <a href="AdminSubject.html" class="button"><i class="fa-solid fa-book"></i> Subject</a>
            <a href="AdminSettings.html" class="button"><i class="fa-solid fa-gear fa-lg"></i> Settings</a>
            <a href="loginpage.html" class="button"><i class="fa-solid fa-right-from-bracket"></i> Logout</a> <!-- here we have to keep login page html -->
          </div>
    </nav>
    <main class="content-area">
      <div class="box">
        <form id="subject-form">
          <div class="input-group">
            <label for="subject-name">Subject Name:</label>
            <input type="text" id="subject-name" name="subject-name" required>
            <label for="subject-code">Subject Code:</label>
            <input type="text" id="subject-code" name="subject-code" required>
          </div>
          <div class="submit">
            <button id="addSubjectBtn">Add Subject</button>
          </div>
          </div>
        </form>
      </div>
    </main>
  </section>
  <script>
    document.getElementById('addSubjectBtn').addEventListener('click', async function(event) {
      event.preventDefault(); // Prevent default form submission
  
      // Get form data
      const name = document.getElementById('subject-name').value;
      const code = document.getElementById('subject-code').value;
      
  
      // Prepare subject data to send in the request body
      const subjectData = {
          name,
          code
      };
  
      // Send POST request to add subject
      try {
          const response = await fetch('http://localhost:3000/subjects/add', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json'
              },
              body: JSON.stringify(subjectData)
          });
  
          // Check if request was successful
          if (response.ok) {
              const data = await response.json();
              console.log(data.message); // Log success message
              // Show pop-up saying "subject Added Successfully"
              alert('subject Added Successfully');
          } else {
              console.error('Failed to add subject');
              // Optionally, you can display an error message to the user
          }
      } catch (error) {
          console.error('Error adding subject:', error);
          // Optionally, you can display an error message to the user
      }
  });
  
    </script>
</body>
</html>