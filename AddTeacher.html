<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel</title>
  <link rel="stylesheet" href="AdminDashboard.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
  <header>
    <div class="background"></div>
     <h1>Teacher</h1>
     <div class="content-layer">
      <!-- Notification icon -->
      <a href="#"><i class="fa-regular fa-bell fa-lg"></i></a>  
     <!-- User picture -->
     <img src="image/user.jpg" alt="User Picture" class="user-picture">
     </div>
  </header>
  <section class="main-section">
    <nav class="main-menu">
        <div class="nav">
            <a href="AdminDashboard.html" class="button"><i class="fa-solid fa-house"></i> Home</a>
            <a href="AdminStudent.html" class="button"><i class="fa-solid fa-graduation-cap"></i> Student</a>
            <a href="AdminTeacher.html" class="button"><i class="fa-solid fa-person-chalkboard"></i> Teacher</a>
            <a href="AdminSubject.html" class="button"><i class="fa-solid fa-book"></i> Subject</a>
            <a href="AdminSettings.html" class="button"><i class="fa-solid fa-gear fa-lg"></i> Settings</a>
            <a href="loginpage.html" class="button"><i class="fa-solid fa-right-from-bracket"></i> Logout</a> <!-- here we have to keep login page html -->
          </div>
    </nav>
    <main class="content-area">
      <div class="box">
        <form id="teacher-form">
          <div class="input-group">
            <label for="teacher-name">Teacher Name:</label>
            <input type="text" id="teacher-name" name="teacher-name" required>
          </div>
          <div class="input-group">
            <label for="teacher-email">Email:</label>
            <input type="email" id="teacher-email" name="teacher-email" required>
          </div>
          <div class="input-group">
            <label for="teacher-phone">Phone:</label>
            <input type="tel" id="teacher-phone" name="teacher-phone" required>
          </div>
          <div class="submit">
            <button id="addTeacherBtn">Add Teacher</button>
          </div>
        </form>
      </div>
    
      <div class="box">
        <h2>Teacher List</h2>
        <table id="teacher-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Name</th>
              <th>Email</th>
              <th>Phone</th>
            </tr>
          </thead>
          <tbody id="teacher-table-body"></tbody>
        </table>
      </div>
    </main>
    
  </section>
  <script>
    document.getElementById('addTeacherBtn').addEventListener('click', async function(event) {
      event.preventDefault(); // Prevent default form submission
  
      // Get form data
      const name = document.getElementById('teacher-name').value;
      const email = document.getElementById('teacher-email').value;
      const phone = document.getElementById('teacher-phone').value;
  
      // Prepare teacher data to send in the request body
      const teacherData = {
          name,
          email,
          phone
      };
  
      // Send POST request to add teacher
      try {
          const response = await fetch('http://localhost:3000/teachers/add', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json'
              },
              body: JSON.stringify(teacherData)
          });
  
          // Check if request was successful
          if (response.ok) {
              const data = await response.json();
              console.log(data.message); // Log success message
              // Show pop-up saying "Teacher Added Successfully"
              alert('Teacher Added Successfully');
          } else {
              console.error('Failed to add Teacher');
              // Optionally, you can display an error message to the user
          }
      } catch (error) {
          console.error('Error adding Teacher:', error);
          // Optionally, you can display an error message to the user
      }
  });
  
    </script>
  
</body>
</html>